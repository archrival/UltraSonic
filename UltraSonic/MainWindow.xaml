<Window x:Class="UltraSonic.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:local="clr-namespace:UltraSonic"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:client="clr-namespace:Subsonic.Client;assembly=Subsonic.Client"
        xmlns:items="clr-namespace:Subsonic.Client.Items;assembly=Subsonic.Client"
        Title="UltraSonic"
        Width="1030"
        Height="700"
        MinWidth="1030"
        MinHeight="700"
        Closed="WindowClosed"
        Icon="Images/ultrasonic-logo.ico"
        mc:Ignorable="d">
    <Window.Resources>
        <Style BasedOn="{StaticResource {x:Type TreeViewItem}}" TargetType="TreeViewItem">
            <Setter Property="HorizontalContentAlignment" Value="Left" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TreeViewItem">
                        <StackPanel>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" MinWidth="19" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <ToggleButton Name="Expander"
                                              ClickMode="Press"
                                              IsChecked="{Binding Path=IsExpanded,
                                                                  RelativeSource={RelativeSource TemplatedParent}}">
                                    <ToggleButton.Style>
                                        <Style TargetType="ToggleButton">
                                            <Setter Property="Focusable" Value="false" />
                                            <Setter Property="Width" Value="16" />
                                            <Setter Property="Height" Value="16" />
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="ToggleButton">
                                                        <Border Width="16"
                                                                Height="16"
                                                                Background="#00FFFFFF"
                                                                Padding="5,5,5,5">
                                                            <Path Name="ExpandPath"
                                                                  Fill="#00FFFFFF"
                                                                  Stroke="#FF989898">
                                                                <Path.Data>
                                                                    <PathGeometry Figures="M0,0L0,6L6,0z" />
                                                                </Path.Data>
                                                                <Path.RenderTransform>
                                                                    <RotateTransform Angle="135" CenterX="3" CenterY="3" />
                                                                </Path.RenderTransform>
                                                            </Path>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="UIElement.IsMouseOver" Value="True">
                                                                <Setter TargetName="ExpandPath" Property="Shape.Stroke" Value="#FF1BBBFA" />
                                                                <Setter TargetName="ExpandPath" Property="Shape.Fill" Value="#00FFFFFF" />
                                                            </Trigger>
                                                            <Trigger Property="ToggleButton.IsChecked" Value="True">
                                                                <Setter TargetName="ExpandPath" Property="UIElement.RenderTransform">
                                                                    <Setter.Value>
                                                                        <RotateTransform Angle="180" CenterX="3" CenterY="3" />
                                                                    </Setter.Value>
                                                                </Setter>
                                                                <Setter TargetName="ExpandPath" Property="Shape.Fill" Value="#FF595959" />
                                                                <Setter TargetName="ExpandPath" Property="Shape.Stroke" Value="#FF262626" />
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </ToggleButton.Style>
                                </ToggleButton>
                                <Border x:Name="Bd"
                                        Grid.Row="0"
                                        Grid.Column="1"
                                        HorizontalAlignment="Stretch"
                                        Background="{TemplateBinding Panel.Background}"
                                        BorderBrush="{TemplateBinding Border.BorderBrush}"
                                        BorderThickness="{TemplateBinding Border.BorderThickness}"
                                        Padding="{TemplateBinding Control.Padding}"
                                        SnapsToDevicePixels="True">
                                    <ContentPresenter x:Name="PART_Header"
                                                      HorizontalAlignment="{TemplateBinding Control.HorizontalContentAlignment}"
                                                      Content="{TemplateBinding HeaderedContentControl.Header}"
                                                      ContentSource="Header"
                                                      ContentStringFormat="{TemplateBinding HeaderedItemsControl.HeaderStringFormat}"
                                                      ContentTemplate="{TemplateBinding HeaderedContentControl.HeaderTemplate}"
                                                      ContentTemplateSelector="{TemplateBinding HeaderedItemsControl.HeaderTemplateSelector}"
                                                      SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
                                </Border>
                                <ItemsPresenter x:Name="ItemsHost"
                                                Grid.Row="1"
                                                Grid.Column="1" />
                            </Grid>
                        </StackPanel>
                        <ControlTemplate.Triggers>
                            <Trigger Property="TreeViewItem.IsExpanded" Value="False">
                                <Setter TargetName="ItemsHost" Property="UIElement.Visibility" Value="Collapsed" />
                            </Trigger>
                            <Trigger Property="ItemsControl.HasItems" Value="False">
                                <Setter TargetName="Expander" Property="UIElement.Visibility" Value="Hidden" />
                            </Trigger>
                            <Trigger Property="TreeViewItem.IsSelected" Value="True">
                                <Setter TargetName="Bd" Property="Panel.Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
                                <Setter Property="TextElement.Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
                            </Trigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="TreeViewItem.IsSelected" Value="True" />
                                    <Condition Property="Selector.IsSelectionActive" Value="False" />
                                </MultiTrigger.Conditions>
                                <Setter TargetName="Bd" Property="Panel.Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                                <Setter Property="TextElement.Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
                            </MultiTrigger>
                            <Trigger Property="UIElement.IsEnabled" Value="False">
                                <Setter Property="TextElement.Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <DataTemplate x:Key="ChatMessageUserCellTemplate">
            <TextBlock FontWeight="Bold"
                       Foreground="Black"
                       TextAlignment="Center">
                <TextBlock.Text>
                    <MultiBinding StringFormat="{}&lt;{0}&gt;">
                        <Binding Path="User" />
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>
        </DataTemplate>
        <DataTemplate x:Key="ChatMessageTimeStampCellTemplate">
            <TextBlock Foreground="Black" TextAlignment="Center">
                <TextBlock.Text>
                    <MultiBinding StringFormat="{}[{0}]">
                        <Binding Path="TimeStamp" />
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>
        </DataTemplate>
        <DataTemplate x:Key="ChatMessageCellTemplate">
            <TextBlock Width="Auto"
                       FontWeight="Normal"
                       Foreground="Black"
                       Text="{Binding Path=Message}"
                       TextAlignment="Left" />
        </DataTemplate>
    </Window.Resources>
    <Window.CommandBindings>
        <CommandBinding CanExecute="CommandCanExecute"
                        Command="MediaCommands.Play"
                        Executed="PlayButtonClick" />
        <CommandBinding CanExecute="CommandCanExecute"
                        Command="MediaCommands.Stop"
                        Executed="StopButtonClick" />
        <CommandBinding CanExecute="CommandCanExecute"
                        Command="MediaCommands.Pause"
                        Executed="PauseButtonClick" />
        <CommandBinding CanExecute="PreviousCanExecute"
                        Command="MediaCommands.PreviousTrack"
                        Executed="PreviousButtonClick" />
        <CommandBinding CanExecute="NextCanExecute"
                        Command="MediaCommands.NextTrack"
                        Executed="NextButtonClick" />
        <CommandBinding CanExecute="CommandCanExecute"
                        Command="local:MainWindow.PlayPauseCommand"
                        Executed="PauseButtonClick" />
        <CommandBinding CanExecute="PreviousCanExecute"
                        Command="local:MainWindow.PreviousCommand"
                        Executed="PreviousButtonClick" />
        <CommandBinding CanExecute="NextCanExecute"
                        Command="local:MainWindow.NextCommand"
                        Executed="NextButtonClick" />
    </Window.CommandBindings>
    <Window.TaskbarItemInfo>
        <TaskbarItemInfo>
            <TaskbarItemInfo.ThumbButtonInfos>
                <ThumbButtonInfoCollection>
                    <ThumbButtonInfo Command="MediaCommands.PreviousTrack"
                                     CommandTarget="{Binding ElementName=PreviousButton}"
                                     Description="Previous"
                                     DismissWhenClicked="False"
                                     ImageSource="Images/media-skip-backward-dark-16.png" />
                    <ThumbButtonInfo Command="MediaCommands.Play"
                                     CommandTarget="{Binding ElementName=PlayButton}"
                                     Description="Play"
                                     DismissWhenClicked="False"
                                     ImageSource="Images/media-playback-start-dark-16.png" />
                    <ThumbButtonInfo Command="MediaCommands.Pause"
                                     CommandTarget="{Binding ElementName=PauseButton}"
                                     Description="Pause"
                                     DismissWhenClicked="False"
                                     ImageSource="Images/media-playback-pause-dark-16.png" />
                    <ThumbButtonInfo Command="MediaCommands.Stop"
                                     CommandTarget="{Binding ElementName=StopButton}"
                                     Description="Stop"
                                     DismissWhenClicked="False"
                                     ImageSource="Images/media-playback-stop-dark-16.png" />
                    <ThumbButtonInfo Command="MediaCommands.NextTrack"
                                     CommandTarget="{Binding ElementName=NextButton}"
                                     Description="Next"
                                     DismissWhenClicked="False"
                                     ImageSource="Images/media-skip-forward-dark-16.png" />
                </ThumbButtonInfoCollection>
            </TaskbarItemInfo.ThumbButtonInfos>
        </TaskbarItemInfo>
    </Window.TaskbarItemInfo>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="1*" />
        </Grid.ColumnDefinitions>
        <DockPanel Grid.ColumnSpan="3"
                   Height="29"
                   HorizontalAlignment="Stretch"
                   VerticalAlignment="Bottom"
                   Background="Linen"
                   LastChildFill="True">
            <StatusBarItem x:Name="MusicTimeRemainingLabel"
                           Width="100"
                           FontSize="10" />
            <StatusBarItem x:Name="MusicPlayStatusLabel"
                           Width="120"
                           FontSize="10" />
            <StatusBarItem x:Name="SearchStatusLabel"
                           Width="120"
                           FontSize="10" />
            <StatusBarItem x:Name="DownloadStatusLabel"
                           Width="220"
                           FontSize="10" />
            <local:CircularProgressBar x:Name="ProgressIndicator"
                                       Width="14"
                                       Height="14"
                                       Margin="10,0,10,0"
                                       HorizontalAlignment="Right"
                                       HorizontalContentAlignment="Right"
                                       DockPanel.Dock="Right" />
        </DockPanel>
        <TabControl Grid.Column="0"
                    Grid.ColumnSpan="3"
                    Margin="10,5,10,108">
            <TabItem x:Name="MusicTab" Header="Music">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="1*" />
                        <RowDefinition Height="1*" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="1*" />
                    </Grid.ColumnDefinitions>
                    <DockPanel Grid.RowSpan="3" Grid.Column="0">
                        <Border Background="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                                BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}"
                                BorderThickness="1"
                                DockPanel.Dock="Top">
                            <TextBlock HorizontalAlignment="Center"
                                       FontSize="12"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"
                                       Text="Artists" />
                        </Border>
                        <TreeView x:Name="ArtistTreeView"
                                  HorizontalAlignment="Stretch"
                                  VerticalAlignment="Stretch"
                                  VerticalContentAlignment="Top"
                                  DataContext="{Binding ArtistItems}"
                                  DockPanel.Dock="Top"
                                  ItemsSource="{Binding}"
                                  ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                  ScrollViewer.VerticalScrollBarVisibility="Auto"
                                  SelectedItemChanged="ArtistTreeViewSelectedItemChanged"
                                  UseLayoutRounding="True">
                            <TreeView.ContextMenu>
                                <ContextMenu>
                                    <MenuItem Click="ArtistRefreshClick" Header="Refresh" />
                                    <MenuItem Click="ExpandAllArtistsClick" Header="Expand All" />
                                    <MenuItem Click="CollapseAllArtistsClick" Header="Collapse All" />
                                </ContextMenu>
                            </TreeView.ContextMenu>
                            <TreeView.Resources>
                                <HierarchicalDataTemplate DataType="{x:Type items:ArtistItem}" ItemsSource="{Binding Path=Children}">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Path=Name}" />
                                    </StackPanel>
                                </HierarchicalDataTemplate>
                            </TreeView.Resources>
                        </TreeView>
                    </DockPanel>
                    <DockPanel Grid.Row="0"
                               Grid.Column="1"
                               Grid.ColumnSpan="2"
                               HorizontalAlignment="Stretch"
                               VerticalAlignment="Stretch">
                        <Border Background="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                                BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}"
                                BorderThickness="1"
                                DockPanel.Dock="Top">
                            <TextBlock HorizontalAlignment="Center"
                                       FontSize="12"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"
                                       Text="Albums" />
                        </Border>
                        <DataGrid x:Name="AlbumDataGrid"
                                  HorizontalAlignment="Stretch"
                                  VerticalAlignment="Stretch"
                                  AutoGenerateColumns="False"
                                  Background="White"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  CanUserResizeRows="False"
                                  DataContext="{Binding}"
                                  DockPanel.Dock="Top"
                                  GridLinesVisibility="None"
                                  HorizontalScrollBarVisibility="Auto"
                                  ItemsSource="{Binding}"
                                  LoadingRow="DataGridLoadingRow"
                                  MouseDoubleClick="AlbumDataGridMouseDoubleClick"
                                  MouseLeftButtonUp="AlbumDataGridSelectionChanged"
                                  RowBackground="White"
                                  VerticalScrollBarVisibility="Auto"
                                  VirtualizingStackPanel.VirtualizationMode="Recycling">
                            <DataGrid.ContextMenu>
                                <ContextMenu>
                                    <MenuItem Click="AlbumDataGridAddClick"
                                              Header="Add To Playlist"
                                              Icon="" />
                                    <MenuItem x:Name="AlbumDataGridDownload"
                                              Click="AlbumDataGridDownloadClick"
                                              Header="Download" />
                                    <MenuItem x:Name="AlbumDataGridEnableCoverArt" Click="AlbumDataGridEnableCoverArtClick" />
                                    <Separator />
                                    <MenuItem Click="AlbumDataGridAlbumListClick" Header="Random" />
                                    <MenuItem Click="AlbumDataGridAlbumListClick" Header="Newest" />
                                    <MenuItem Click="AlbumDataGridAlbumListClick" Header="Highest Rated" />
                                    <MenuItem Click="AlbumDataGridAlbumListClick" Header="Frequently Played" />
                                    <MenuItem Click="AlbumDataGridAlbumListClick" Header="Recently Played" />
                                    <MenuItem x:Name="AlbumDataGridStarred"
                                              Click="AlbumDataGridAlbumListClick"
                                              Header="Starred" />
                                    <MenuItem x:Name="AlbumDataGridNext"
                                              Click="AlbumDataGridNextClick"
                                              Visibility="Collapsed" />
                                </ContextMenu>
                            </DataGrid.ContextMenu>
                            <DataGrid.Columns>
                                <DataGridTemplateColumn SortMemberPath="Starred">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <ToggleButton Name="AlbumDataGridStarredCheckbox"
                                                          Width="16"
                                                          Height="16"
                                                          Click="StarredCheckBoxClick"
                                                          Cursor="Hand"
                                                          IsChecked="{Binding Path=Starred,
                                                                              Mode=TwoWay,
                                                                              UpdateSourceTrigger=PropertyChanged}"
                                                          Template="{StaticResource ResourceKey=StarTemplate}" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn x:Name="AlbumDataGridAlbumArtColumn">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Image Width="{Binding AlbumArtSize}"
                                                   Height="{Binding AlbumArtSize}"
                                                   Source="{Binding Image,
                                                                    NotifyOnTargetUpdated=True}" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Play">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Image x:Name="PlayTrackImage"
                                                   Width="20"
                                                   Height="20"
                                                   Cursor="Hand"
                                                   MouseLeftButtonDown="PlayAlbumImageMouseLeftButtonDown"
                                                   Source="Images\media-playback-start.png" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Artist"
                                                        IsReadOnly="True"
                                                        SortMemberPath="Artist">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="4,0,4,0"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                <TextBlock Text="{Binding Path=Artist}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Album"
                                                        IsReadOnly="True"
                                                        SortMemberPath="Name">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="4,0,4,0"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                <TextBlock Text="{Binding Name}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Year"
                                                        IsReadOnly="True"
                                                        SortMemberPath="Year">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="4,0,4,0"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                <TextBlock Text="{Binding Year}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Rating" SortMemberPath="Rating">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <local:RatingControl Width="87"
                                                                 Height="16"
                                                                 Click="RatingClick"
                                                                 Cursor="Hand"
                                                                 RatingValue="{Binding Path=Rating}" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </DockPanel>
                    <DockPanel Grid.Row="1"
                               Grid.Column="1"
                               Grid.ColumnSpan="2"
                               HorizontalAlignment="Stretch"
                               VerticalAlignment="Stretch">
                        <Border Background="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                                BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}"
                                BorderThickness="1"
                                DockPanel.Dock="Top">
                            <TextBlock HorizontalAlignment="Center"
                                       FontSize="12"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"
                                       Text="Tracks" />
                        </Border>
                        <DataGrid x:Name="TrackDataGrid"
                                  AutoGenerateColumns="False"
                                  Background="White"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  CanUserResizeRows="False"
                                  DockPanel.Dock="Top"
                                  GridLinesVisibility="None"
                                  HorizontalScrollBarVisibility="Auto"
                                  ItemsSource="{Binding NotifyOnSourceUpdated=True}"
                                  LoadingRow="DataGridLoadingRow"
                                  MouseDoubleClick="TrackDataGridMouseDoubleClick"
                                  RowBackground="White"
                                  SelectionMode="Extended"
                                  VerticalScrollBarVisibility="Auto">
                            <DataGrid.ContextMenu>
                                <ContextMenu>
                                    <MenuItem Click="TrackDataGridAddClick" Header="Add To Playlist" />
                                    <MenuItem x:Name="TrackDataGridDownload"
                                              Click="TrackDataGridDownloadClick"
                                              Header="Download" />
                                </ContextMenu>
                            </DataGrid.ContextMenu>
                            <DataGrid.Columns>
                                <DataGridTemplateColumn x:Name="TrackDataGridStarred">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <ToggleButton Name="StarredCheckbox"
                                                          Width="16"
                                                          Height="16"
                                                          Click="StarredCheckBoxClick"
                                                          Cursor="Hand"
                                                          IsChecked="{Binding Path=Starred,
                                                                              Mode=TwoWay,
                                                                              UpdateSourceTrigger=PropertyChanged}"
                                                          Template="{StaticResource ResourceKey=StarTemplate}" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Play">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Image x:Name="PlayTrackImage"
                                                   Width="20"
                                                   Height="20"
                                                   Cursor="Hand"
                                                   MouseLeftButtonDown="PlayTrackImageMouseLeftButtonDown"
                                                   Source="Images\media-playback-start.png" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Disc"
                                                        IsReadOnly="True"
                                                        SortMemberPath="DiscNumber">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="4,0,4,0"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                <TextBlock Text="{Binding DiscNumber}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Track"
                                                        IsReadOnly="True"
                                                        SortMemberPath="Track">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="4,0,4,0"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                <TextBlock Text="{Binding TrackNumber}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Artist"
                                                        IsReadOnly="True"
                                                        SortMemberPath="Artist">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="4,0,4,0"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                <TextBlock Text="{Binding Artist}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Title"
                                                        IsReadOnly="True"
                                                        SortMemberPath="Title">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="4,0,4,0"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                <TextBlock Text="{Binding Title, NotifyOnTargetUpdated=True}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Album"
                                                        IsReadOnly="True"
                                                        SortMemberPath="Album">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="4,0,4,0"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                <TextBlock Text="{Binding Album}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Genre"
                                                        IsReadOnly="True"
                                                        SortMemberPath="Genre">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="4,0,4,0"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                <TextBlock Text="{Binding Genre}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Year"
                                                        IsReadOnly="True"
                                                        SortMemberPath="Year">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="4,0,4,0"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                <TextBlock Text="{Binding Year}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Duration"
                                                        IsReadOnly="True"
                                                        SortMemberPath="Duration">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="4,0,4,0"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                <TextBlock Text="{Binding Duration}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="BitRate"
                                                        IsReadOnly="True"
                                                        SortMemberPath="BitRate">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="4,0,4,0"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                <TextBlock Text="{Binding BitRate}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Cached" SortMemberPath="Cached">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <CheckBox x:Name="CachedCheckbox"
                                                      VerticalAlignment="Center"
                                                      IsChecked="{Binding Path=Cached,
                                                                          Mode=TwoWay}"
                                                      IsThreeState="False" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Rating" SortMemberPath="Rating">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <local:RatingControl x:Name="RatingControl"
                                                                 Width="87"
                                                                 Height="16"
                                                                 Click="RatingClick"
                                                                 Cursor="Hand"
                                                                 RatingValue="{Binding Path=Rating}" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </DockPanel>
                </Grid>
            </TabItem>
            <TabItem x:Name="PlaylistTab" Header="Playlists">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="1*" />
                    </Grid.ColumnDefinitions>
                    <Popup Grid.RowSpan="2"
                           AllowsTransparency="True"
                           IsHitTestVisible="False"
                           Placement="RelativePoint"
                           PlacementTarget="{Binding ElementName=me}">
                        <Border Background="White"
                                BorderBrush="Black"
                                BorderThickness="1"
                                Opacity="0.75">
                            <StackPanel>
                                <Image Width="36"
                                       Height="36"
                                       Source="/Images/view-sort.png" />
                            </StackPanel>
                        </Border>
                    </Popup>
                    <DockPanel Grid.Row="0"
                               Grid.RowSpan="2"
                               Grid.Column="0">
                        <Border Background="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                                BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}"
                                BorderThickness="1"
                                DockPanel.Dock="Top">
                            <TextBlock HorizontalAlignment="Center"
                                       FontSize="12"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"
                                       Text="Playlists" />
                        </Border>
                        <DataGrid x:Name="PlaylistsDataGrid"
                                  AutoGenerateColumns="False"
                                  Background="White"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  CanUserResizeRows="False"
                                  DockPanel.Dock="Top"
                                  GridLinesVisibility="None"
                                  HorizontalScrollBarVisibility="Auto"
                                  LoadingRow="DataGridLoadingRow"
                                  MouseDoubleClick="PlaylistsDataGridSelectionChanged"
                                  RowBackground="White"
                                  VerticalScrollBarVisibility="Auto">
                            <DataGrid.ContextMenu>
                                <ContextMenu>
                                    <MenuItem x:Name="PlaylistsGridDeletePlaylist"
                                              Click="PlaylistsDataGridDeletePlaylistClick"
                                              Header="Delete Playlist" />
                                    <MenuItem Click="PlaylistsDataGridRefreshClick" Header="Refresh" />
                                </ContextMenu>
                            </DataGrid.ContextMenu>
                            <DataGrid.Columns>
                                <DataGridTextColumn Width="auto"
                                                    Binding="{Binding Name}"
                                                    Header="Name"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Width="auto"
                                                    Binding="{Binding Tracks}"
                                                    Header="Titles"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Width="auto"
                                                    Binding="{Binding Duration}"
                                                    Header="Duration"
                                                    IsReadOnly="True" />
                            </DataGrid.Columns>
                        </DataGrid>
                    </DockPanel>
                    <DockPanel Grid.Row="0"
                               Grid.Column="1"
                               Grid.ColumnSpan="2">
                        <Border Background="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                                BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}"
                                BorderThickness="1"
                                DockPanel.Dock="Top">
                            <TextBlock HorizontalAlignment="Center"
                                       FontSize="12"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"
                                       Text="Playlist Tracks" />
                        </Border>
                        <DataGrid x:Name="PlaylistTrackGrid"
                                  AutoGenerateColumns="False"
                                  Background="White"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="True"
                                  CanUserResizeRows="False"
                                  DockPanel.Dock="Top"
                                  GridLinesVisibility="None"
                                  HorizontalScrollBarVisibility="Auto"
                                  ItemsSource="{Binding NotifyOnSourceUpdated=True}"
                                  LoadingRow="DataGridLoadingRow"
                                  MouseDoubleClick="PlaylistTrackGridMouseDoubleClick"
                                  RowBackground="White"
                                  SelectionMode="Single"
                                  VerticalScrollBarVisibility="Auto">
                            <DataGrid.ContextMenu>
                                <ContextMenu>
                                    <MenuItem x:Name="PlaylistTrackGridDownload"
                                              Click="PlaylistTrackGridDownloadClick"
                                              Header="Download" />
                                </ContextMenu>
                            </DataGrid.ContextMenu>
                            <DataGrid.Columns>
                                <DataGridTemplateColumn x:Name="PlaylistGridStarred">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <ToggleButton Name="StarredCheckbox"
                                                          Width="16"
                                                          Height="16"
                                                          Click="StarredCheckBoxClick"
                                                          Cursor="Hand"
                                                          IsChecked="{Binding Path=Starred,
                                                                              Mode=TwoWay,
                                                                              UpdateSourceTrigger=PropertyChanged}"
                                                          Template="{StaticResource ResourceKey=StarTemplate}" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTextColumn Binding="{Binding DiscNumber}"
                                                    Header="Disc"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Binding="{Binding TrackNumber}"
                                                    Header="Track"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Binding="{Binding Artist}"
                                                    Header="Artist"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Binding="{Binding Title}"
                                                    Header="Title"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Binding="{Binding Album}"
                                                    Header="Album"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Binding="{Binding Genre}"
                                                    Header="Genre"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Binding="{Binding Year}"
                                                    Header="Year"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Binding="{Binding Duration}"
                                                    Header="Duration"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Binding="{Binding BitRate}"
                                                    Header="BitRate"
                                                    IsReadOnly="True" />
                                <DataGridTemplateColumn Header="Cached" SortMemberPath="Cached">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <CheckBox x:Name="CachedCheckbox"
                                                      VerticalAlignment="Center"
                                                      IsChecked="{Binding Path=Cached,
                                                                          Mode=TwoWay}"
                                                      IsThreeState="False" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Rating" SortMemberPath="Rating">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <local:RatingControl x:Name="RatingControl"
                                                                 Width="87"
                                                                 Height="16"
                                                                 Click="RatingClick"
                                                                 Cursor="Hand"
                                                                 RatingValue="{Binding Path=Rating}" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </DockPanel>
                    <DockPanel Grid.Row="1"
                               Grid.Column="1"
                               Grid.ColumnSpan="2">
                        <Border Background="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                                BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}"
                                BorderThickness="1"
                                DockPanel.Dock="Top">
                            <TextBlock HorizontalAlignment="Center"
                                       FontSize="12"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"
                                       Text="Playback Tracks" />
                        </Border>
                        <DataGrid x:Name="PlaybackTrackGrid"
                                  AutoGenerateColumns="False"
                                  Background="White"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="True"
                                  CanUserResizeRows="False"
                                  DockPanel.Dock="Top"
                                  GridLinesVisibility="None"
                                  HorizontalScrollBarVisibility="Auto"
                                  ItemsSource="{Binding NotifyOnSourceUpdated=True}"
                                  LoadingRow="DataGridLoadingRow"
                                  MouseDoubleClick="PlaybackTrackGridMouseDoubleClick"
                                  RowBackground="White"
                                  SelectionMode="Extended"
                                  VerticalScrollBarVisibility="Auto">
                            <DataGrid.ContextMenu>
                                <ContextMenu>
                                    <MenuItem Click="PlaybackTrackGridAddClick" Header="Add To Playlist" />
                                    <MenuItem Click="PlaybackTrackGridDownloadClick" Header="Download" />
                                </ContextMenu>
                            </DataGrid.ContextMenu>
                            <DataGrid.Columns>
                                <DataGridTemplateColumn>
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <ToggleButton Name="StarredCheckbox"
                                                          Width="16"
                                                          Height="16"
                                                          Click="StarredCheckBoxClick"
                                                          Cursor="Hand"
                                                          IsChecked="{Binding Path=Starred,
                                                                              Mode=TwoWay,
                                                                              UpdateSourceTrigger=PropertyChanged}"
                                                          Template="{StaticResource ResourceKey=StarTemplate}" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTextColumn Binding="{Binding DiscNumber}"
                                                    Header="Disc"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Binding="{Binding TrackNumber}"
                                                    Header="Track"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Binding="{Binding Artist}"
                                                    Header="Artist"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Binding="{Binding Title}"
                                                    Header="Title"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Binding="{Binding Album}"
                                                    Header="Album"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Binding="{Binding Genre}"
                                                    Header="Genre"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Binding="{Binding Year}"
                                                    Header="Year"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Binding="{Binding Duration}"
                                                    Header="Duration"
                                                    IsReadOnly="True" />
                                <DataGridTextColumn Binding="{Binding BitRate}"
                                                    Header="BitRate"
                                                    IsReadOnly="True" />
                                <DataGridTemplateColumn Header="Cached" SortMemberPath="Cached">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <CheckBox x:Name="CachedCheckbox"
                                                      VerticalAlignment="Center"
                                                      IsChecked="{Binding Path=Cached,
                                                                          Mode=TwoWay}"
                                                      IsThreeState="False" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Rating" SortMemberPath="Rating">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <local:RatingControl x:Name="RatingControl"
                                                                 Width="87"
                                                                 Height="16"
                                                                 Click="RatingClick"
                                                                 Cursor="Hand"
                                                                 RatingValue="{Binding Path=Rating}" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </DockPanel>
                    <!--  Drag and Drop Popup  -->
                </Grid>
            </TabItem>
            <TabItem x:Name="SocialTab"
                     GotFocus="SocialTabGotFocus"
                     Header="Social">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="497*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="1*" />
                    </Grid.ColumnDefinitions>
                    <DockPanel Grid.Column="0">
                        <Border Background="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                                BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}"
                                BorderThickness="1"
                                DockPanel.Dock="Top">
                            <TextBlock HorizontalAlignment="Center"
                                       FontSize="12"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"
                                       Text="Recently Played" />
                        </Border>
                        <DataGrid x:Name="NowPlayingDataGrid"
                                  HorizontalAlignment="Stretch"
                                  AutoGenerateColumns="False"
                                  Background="White"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  CanUserResizeRows="False"
                                  DockPanel.Dock="Top"
                                  GridLinesVisibility="None"
                                  HorizontalScrollBarVisibility="Auto"
                                  MouseDoubleClick="NowPlayingDataGridMouseDoubleClick"
                                  RowBackground="White"
                                  VerticalScrollBarVisibility="Auto">
                            <DataGrid.ContextMenu>
                                <ContextMenu>
                                    <MenuItem Click="NowPlayingRefreshClick" Header="Refresh" />
                                    <MenuItem x:Name="SocialEnableCoverArt" Click="AlbumDataGridEnableCoverArtClick" />
                                </ContextMenu>
                            </DataGrid.ContextMenu>
                            <DataGrid.Columns>
                                <DataGridTemplateColumn>
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <ToggleButton Name="NowPlayingGridStarredCheckbox"
                                                          Width="16"
                                                          Height="16"
                                                          Click="StarredCheckBoxClick"
                                                          Cursor="Hand"
                                                          IsChecked="{Binding Path=Starred,
                                                                              Mode=TwoWay,
                                                                              UpdateSourceTrigger=PropertyChanged}"
                                                          Template="{StaticResource ResourceKey=StarTemplate}" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn x:Name="SocalAlbumArtColumn">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Image Width="{Binding AlbumArtSize}"
                                                   Height="{Binding AlbumArtSize}"
                                                   Source="{Binding Image,
                                                                    NotifyOnTargetUpdated=True}" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="User" IsReadOnly="True">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="4,0,4,0"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                <TextBlock Text="{Binding User}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Artist" IsReadOnly="True">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="4,0,4,0"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                <TextBlock Text="{Binding Artist}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Title" IsReadOnly="True">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="4,0,4,0"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                <TextBlock Text="{Binding Title}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Album" IsReadOnly="True">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="4,0,4,0"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                <TextBlock Text="{Binding Album}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="When" IsReadOnly="True">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Margin="4,0,4,0"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Orientation="Horizontal">
                                                <TextBlock Text="{Binding When}" />
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Rating" SortMemberPath="Rating">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <local:RatingControl x:Name="RatingControl"
                                                                 Width="87"
                                                                 Height="16"
                                                                 Click="RatingClick"
                                                                 Cursor="Hand"
                                                                 RatingValue="{Binding Path=Rating}" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </DockPanel>
                    <DockPanel Grid.Row="0" Grid.Column="1">
                        <Border Background="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                                BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}"
                                BorderThickness="1"
                                DockPanel.Dock="Top">
                            <TextBlock HorizontalAlignment="Center"
                                       FontSize="12"
                                       FontWeight="Bold"
                                       Foreground="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"
                                       Text="Chat" />
                        </Border>
                        <TextBox x:Name="ChatListInput"
                                 DockPanel.Dock="Top"
                                 KeyDown="ChatListTextBoxKeyDown" />
                        <ListView x:Name="ChatListView" DockPanel.Dock="Top">
                            <ListView.Resources>
                                <Style TargetType="{x:Type GridViewColumnHeader}">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </Style>
                            </ListView.Resources>
                            <ListView.View>
                                <GridView>
                                    <GridViewColumn Width="Auto" CellTemplate="{StaticResource ChatMessageTimeStampCellTemplate}" />
                                    <GridViewColumn Width="Auto" CellTemplate="{StaticResource ChatMessageUserCellTemplate}" />
                                    <GridViewColumn Width="Auto" CellTemplate="{StaticResource ChatMessageCellTemplate}" />
                                </GridView>
                            </ListView.View>
                        </ListView>
                    </DockPanel>
                </Grid>
            </TabItem>
            <TabItem x:Name="SettingsTab" Header="Settings">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="1*" />
                        <ColumnDefinition Width="1*" />
                    </Grid.ColumnDefinitions>
                    <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <Border Background="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                                    BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}"
                                    BorderThickness="1">
                                <TextBlock HorizontalAlignment="Center"
                                           FontSize="12"
                                           FontWeight="Bold"
                                           Foreground="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"
                                           Text="Settings / Preferences" />
                            </Border>
                            <Expander x:Name="ServerSettingsExpander"
                                      HorizontalAlignment="Stretch"
                                      VerticalAlignment="Stretch"
                                      Header="Server Settings">
                                <StackPanel HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                    <StackPanel.Resources>
                                        <Style TargetType="{x:Type TextBox}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                        </Style>
                                        <Style TargetType="{x:Type TextBlock}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                        </Style>
                                        <Style TargetType="{x:Type PasswordBox}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                        </Style>
                                    </StackPanel.Resources>
                                    <TextBlock Width="Auto"
                                               HorizontalAlignment="Left"
                                               Text="Server Address" />
                                    <TextBox x:Name="SettingsServerAddressTextBox"
                                             HorizontalAlignment="Stretch"
                                             TextWrapping="NoWrap"
                                             ToolTip="Enter Subsonic server address URL" />
                                    <TextBlock Width="Auto"
                                               HorizontalAlignment="Left"
                                               Text="Username" />
                                    <TextBox x:Name="SettingsUsernameTextBox"
                                             HorizontalAlignment="Stretch"
                                             TextWrapping="NoWrap"
                                             ToolTip="Subsonic Username, this is case sensitive" />
                                    <TextBlock Width="Auto"
                                               HorizontalAlignment="Left"
                                               Text="Password" />
                                    <PasswordBox x:Name="SettingsPasswordPasswordBox"
                                                 HorizontalAlignment="Stretch"
                                                 ToolTip="Subsonic Password" />
                                </StackPanel>
                            </Expander>
                            <Expander HorizontalAlignment="Stretch"
                                      VerticalAlignment="Stretch"
                                      Header="Proxy Settings">
                                <StackPanel HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                    <StackPanel.Resources>
                                        <Style TargetType="{x:Type TextBox}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                        </Style>
                                        <Style TargetType="{x:Type TextBlock}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                        </Style>
                                        <Style TargetType="{x:Type PasswordBox}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                        </Style>
                                        <Style TargetType="{x:Type CheckBox}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                        </Style>
                                    </StackPanel.Resources>
                                    <CheckBox x:Name="SettingsUseProxyCheckbox"
                                              Width="Auto"
                                              HorizontalAlignment="Left"
                                              Checked="SettingsUseProxyCheckboxChecked"
                                              ClickMode="Press"
                                              Content="Use Proxy"
                                              ToolTip="If enabled, use proxy configuration entered for communication with Subsonic"
                                              Unchecked="SettingsUseProxyCheckboxUnChecked"
                                              UseLayoutRounding="True" />
                                    <TextBlock Width="Auto"
                                               HorizontalAlignment="Left"
                                               Text="Proxy Address" />
                                    <TextBox x:Name="SettingsProxyServerAddressTextBox"
                                             Width="Auto"
                                             TextWrapping="NoWrap"
                                             ToolTip="Proxy IP or FQDN" />
                                    <TextBlock Width="Auto"
                                               HorizontalAlignment="Left"
                                               Text="Proxy Port" />
                                    <TextBox x:Name="SettingsProxyServerPortTextBox"
                                             Width="50"
                                             HorizontalAlignment="Left"
                                             PreviewTextInput="TextBoxPreviewTextInput"
                                             TextWrapping="NoWrap"
                                             ToolTip="Proxy Port" />
                                    <TextBlock Width="Auto"
                                               HorizontalAlignment="Left"
                                               Text="Proxy Username" />
                                    <TextBox x:Name="SettingsProxyServerUsernameTextBox"
                                             Width="Auto"
                                             TextWrapping="NoWrap"
                                             ToolTip="Proxy Username" />
                                    <TextBlock Width="Auto"
                                               HorizontalAlignment="Left"
                                               Text="Proxy Password" />
                                    <PasswordBox x:Name="SettingsProxyServerPasswordTextBox"
                                                 Width="Auto"
                                                 ToolTip="Proxy Password" />
                                </StackPanel>
                            </Expander>
                            <Expander HorizontalAlignment="Stretch"
                                      VerticalAlignment="Stretch"
                                      Header="Social Settings">
                                <StackPanel HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                    <StackPanel.Resources>
                                        <Style TargetType="{x:Type TextBlock}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                        </Style>
                                        <Style TargetType="{x:Type TextBox}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                        </Style>
                                    </StackPanel.Resources>
                                    <TextBlock Width="Auto"
                                               HorizontalAlignment="Left"
                                               Text="Now Playing Interval" />
                                    <TextBox x:Name="NowPlayingIntervalTextBox"
                                             Width="50"
                                             HorizontalAlignment="Left"
                                             PreviewTextInput="TextBoxPreviewTextInput"
                                             ToolTip="Polling cycle for Now Playing entries, set to 0 to disable" />
                                    <TextBlock Width="Auto"
                                               HorizontalAlignment="Left"
                                               Text="Chat Messages Interval" />
                                    <TextBox x:Name="ChatMessagesIntervalTextBox"
                                             Width="50"
                                             HorizontalAlignment="Left"
                                             PreviewTextInput="TextBoxPreviewTextInput"
                                             ToolTip="Polling cycle for Chat entries, set to 0 to disable" />
                                </StackPanel>
                            </Expander>
                            <Expander HorizontalAlignment="Stretch"
                                      VerticalAlignment="Stretch"
                                      Header="Playback Preferences">
                                <StackPanel HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                    <StackPanel.Resources>
                                        <Style TargetType="{x:Type TextBox}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                        </Style>
                                        <Style TargetType="{x:Type TextBlock}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                        </Style>
                                        <Style TargetType="{x:Type ComboBox}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                            <Setter Property="Width" Value="50" />
                                            <Setter Property="Height" Value="25" />
                                            <Setter Property="HorizontalAlignment" Value="Left" />
                                        </Style>
                                        <Style TargetType="{x:Type CheckBox}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                        </Style>
                                    </StackPanel.Resources>
                                    <CheckBox x:Name="PlaybackFollowsCursorCheckBox"
                                              HorizontalAlignment="Left"
                                              Content="Playback Follows Cursor"
                                              ToolTip="If enabled, the currently playing track will be selected in the Playlist" />
                                    <CheckBox x:Name="SaveWorkingPlaylistCheckBox"
                                              HorizontalAlignment="Left"
                                              Content="Save Working Playlist"
                                              ToolTip="If enabled, the current playlist will be restored after the application is closed and re-opened" />
                                    <CheckBox x:Name="SavePlaybackListCheckBox"
                                              HorizontalAlignment="Left"
                                              Content="Save Playback List"
                                              ToolTip="If enabled, the playback list will be restored after the application is closed and re-opened" />
                                    <CheckBox x:Name="CachePlaylistTracksCheckBox"
                                              HorizontalAlignment="Left"
                                              Content="Cache Playlist Tracks"
                                              ToolTip="If enabled, any uncached tracks in the playlist will be cached if the application is in a playing state" />
                                    <TextBlock Width="Auto"
                                               HorizontalAlignment="Left"
                                               Text="Cache Directory" />
                                    <TextBox x:Name="CacheDirectoryTextBox"
                                             Width="Auto"
                                             ToolTip="Store cover art and music to this location. A subdirectory will be created per server URL" />
                                    <TextBlock Width="Auto"
                                               HorizontalAlignment="Left"
                                               Text="Max Bitrate" />
                                    <ComboBox x:Name="MaxBitrateComboBox"
                                              Width="75"
                                              HorizontalAlignment="Left"
                                              ToolTip="Any songs higher than this bitrate will be transcoded to this bitrate at stream time, set to 0 to disable" />
                                    <TextBlock Width="Auto"
                                               HorizontalAlignment="Left"
                                               Text="Double Click Behavior" />
                                    <ComboBox x:Name="DoubleClickComboBox"
                                              Width="75"
                                              HorizontalAlignment="Left"
                                              ToolTip="Behavior when doubling clicking on a track in the Track view. Play will add the track to the end of the playlist and begin playing. Add will add the track to the end of the playlist." />
                                    <TextBlock Width="Auto"
                                               HorizontalAlignment="Left"
                                               Text="Album Play Button Behavior" />
                                    <ComboBox x:Name="AlbumPlayButtonBehaviorComboBox"
                                              Width="75"
                                              HorizontalAlignment="Left"
                                              ToolTip="Behavior when clicking play on an album in the Album view. Play will clear the playlist and begin playing the album. Ask will ask to save any current playlist before clearing the playlist." />
                                </StackPanel>
                            </Expander>
                            <Expander HorizontalAlignment="Stretch"
                                      VerticalAlignment="Stretch"
                                      Header="Search Preferences">
                                <StackPanel HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                    <StackPanel.Resources>
                                        <Style TargetType="{x:Type TextBlock}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                        </Style>
                                        <Style TargetType="{x:Type TextBox}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                        </Style>
                                    </StackPanel.Resources>
                                    <TextBlock Width="Auto"
                                               HorizontalAlignment="Left"
                                               Text="Album List Max" />
                                    <TextBox x:Name="AlbumListMaxTextBox"
                                             Width="50"
                                             HorizontalAlignment="Left"
                                             PreviewTextInput="TextBoxPreviewTextInput"
                                             ToolTip="Maximum number of albums to be returned when viewing album lists" />
                                    <TextBlock Width="Auto"
                                               HorizontalAlignment="Left"
                                               Text="Max Search Results" />
                                    <TextBox x:Name="MaxSearchResultsTextBox"
                                             Width="50"
                                             HorizontalAlignment="Left"
                                             PreviewTextInput="TextBoxPreviewTextInput"
                                             ToolTip="Maximum number of albums/tracks to be returned when searching" />
                                </StackPanel>
                            </Expander>
                            <Expander HorizontalAlignment="Stretch"
                                      VerticalAlignment="Stretch"
                                      Header="Interface Preferences">
                                <StackPanel HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                                    <StackPanel.Resources>
                                        <Style TargetType="{x:Type TextBox}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                        </Style>
                                        <Style TargetType="{x:Type TextBlock}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                        </Style>
                                        <Style TargetType="{x:Type CheckBox}">
                                            <Setter Property="Margin" Value="10,2,0,2" />
                                        </Style>
                                    </StackPanel.Resources>
                                    <CheckBox x:Name="ShowAlbumArtCheckBox"
                                              HorizontalAlignment="Left"
                                              Checked="ShowAlbumArtCheckboxChecked"
                                              Content="Show Album Art"
                                              ToolTip="If enabled, show cover art in Album and Now Playing views"
                                              Unchecked="ShowAlbumArtCheckboxUnChecked" />
                                    <TextBlock Text="Throttle Image Loading" />
                                    <TextBox x:Name="ThrottleTextBox"
                                             Width="50"
                                             HorizontalAlignment="Left"
                                             PreviewTextInput="TextBoxPreviewTextInput"
                                             ToolTip="Limit simultaneous loading of cover art to this value, set to 0 to disable throttling" />
                                    <TextBlock Text="Album Art Size" />
                                    <TextBox x:Name="AlbumArtSizeTextBox"
                                             Width="50"
                                             HorizontalAlignment="Left"
                                             PreviewTextInput="TextBoxPreviewTextInput"
                                             ToolTip="Width of cover art in Album and Now Playing views" />
                                </StackPanel>
                            </Expander>
                        </StackPanel>
                    </ScrollViewer>
                    <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <Border Background="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                                    BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}"
                                    BorderThickness="1">
                                <TextBlock HorizontalAlignment="Center"
                                           FontSize="12"
                                           FontWeight="Bold"
                                           Foreground="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"
                                           Text="Server Information" />
                            </Border>
                            <DockPanel>
                                <TextBlock Margin="10,2,10,2" Text="REST API:" />
                                <TextBlock x:Name="ServerApiLabel" Margin="0,2,10,2" />
                            </DockPanel>
                            <Border Background="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                                    BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}"
                                    BorderThickness="1">
                                <TextBlock HorizontalAlignment="Center"
                                           FontSize="12"
                                           FontWeight="Bold"
                                           Foreground="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"
                                           Text="License Information" />
                            </Border>
                            <DockPanel>
                                <TextBlock Margin="10,2,10,2" Text="Email:" />
                                <TextBlock x:Name="LicenseEmailLabel"
                                           Margin="0,2,10,2"
                                           Text="" />
                            </DockPanel>
                            <DockPanel>
                                <TextBlock Margin="10,2,10,2" Text="Date:" />
                                <TextBlock x:Name="LicenseDateLabel"
                                           Margin="0,2,10,2"
                                           Text="" />
                            </DockPanel>
                            <DockPanel>
                                <TextBlock Margin="10,2,10,2" Text="Key:" />
                                <TextBlock x:Name="LicenseKeyLabel"
                                           Margin="0,2,10,2"
                                           Text="" />
                            </DockPanel>
                            <DockPanel>
                                <TextBlock Margin="10,2,10,2" Text="Valid:" />
                                <TextBlock x:Name="LicenseValidLabel"
                                           Margin="0,2,10,2"
                                           Text="" />
                            </DockPanel>
                        </StackPanel>
                    </ScrollViewer>
                    <ScrollViewer Grid.Column="2" VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <Border Background="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                                    BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}"
                                    BorderThickness="1">
                                <TextBlock HorizontalAlignment="Center"
                                           FontSize="12"
                                           FontWeight="Bold"
                                           Foreground="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"
                                           Text="User Information" />
                            </Border>
                            <DockPanel>
                                <TextBlock Margin="10,2,10,2" Text="Email:" />
                                <TextBlock x:Name="UserEmailLabel"
                                           Margin="0,2,10,2"
                                           Text="" />
                            </DockPanel>
                            <DockPanel>
                                <TextBlock Margin="10,2,10,2" Text="Scrobble:" />
                                <TextBlock x:Name="UserScrobblingLabel"
                                           Margin="0,2,10,2"
                                           Text="" />
                            </DockPanel>
                            <DockPanel>
                                <TextBlock Margin="10,2,10,2" Text="Admin:" />
                                <TextBlock x:Name="UserAdminLabel"
                                           Margin="0,2,10,2"
                                           Text="" />
                            </DockPanel>
                            <DockPanel>
                                <TextBlock Margin="10,2,10,2" Text="Settings:" />
                                <TextBlock x:Name="UserSettingsLabel"
                                           Margin="0,2,10,2"
                                           Text="" />
                            </DockPanel>
                            <DockPanel>
                                <TextBlock Margin="10,2,10,2" Text="Stream:" />
                                <TextBlock x:Name="UserStreamLabel"
                                           Margin="0,2,10,2"
                                           Text="" />
                            </DockPanel>
                            <DockPanel>
                                <TextBlock Margin="10,2,10,2" Text="Jukebox:" />
                                <TextBlock x:Name="UserJukeboxLabel"
                                           Margin="0,2,10,2"
                                           Text="" />
                            </DockPanel>
                            <DockPanel>
                                <TextBlock Margin="10,2,10,2" Text="Download:" />
                                <TextBlock x:Name="UserDownloadLabel"
                                           Margin="0,2,10,2"
                                           Text="" />
                            </DockPanel>
                            <DockPanel>
                                <TextBlock Margin="10,2,10,2" Text="Upload:" />
                                <TextBlock x:Name="UserUploadLabel"
                                           Margin="0,2,10,2"
                                           Text="" />
                            </DockPanel>
                            <DockPanel>
                                <TextBlock Margin="10,2,10,2" Text="Playlist:" />
                                <TextBlock x:Name="UserPlaylistLabel"
                                           Margin="0,2,10,2"
                                           Text="" />
                            </DockPanel>
                            <DockPanel>
                                <TextBlock Margin="10,2,10,2" Text="Cover Art:" />
                                <TextBlock x:Name="UserCoverArtLabel"
                                           Margin="0,2,10,2"
                                           Text="" />
                            </DockPanel>
                            <DockPanel>
                                <TextBlock Margin="10,2,10,2" Text="Comment:" />
                                <TextBlock x:Name="UserCommentLabel"
                                           Margin="0,2,10,2"
                                           Text="" />
                            </DockPanel>
                            <DockPanel>
                                <TextBlock Margin="10,2,10,2" Text="Podcast:" />
                                <TextBlock x:Name="UserPodcastLabel"
                                           Margin="0,2,10,2"
                                           Text="" />
                            </DockPanel>
                            <DockPanel>
                                <TextBlock x:Name="UserShareLabel2"
                                           Margin="10,2,10,2"
                                           Text="Share:" />
                                <TextBlock x:Name="UserShareLabel"
                                           Margin="0,2,10,2"
                                           Text="" />
                            </DockPanel>
                            <Border x:Name="AvatarLabel"
                                    Background="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                                    BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}"
                                    BorderThickness="1">
                                <TextBlock HorizontalAlignment="Center"
                                           FontSize="12"
                                           FontWeight="Bold"
                                           Foreground="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"
                                           Text="User Avatar" />
                            </Border>
                            <Border x:Name="AvatarBorder"
                                    Width="48"
                                    Height="48"
                                    Margin="10,10,10,10"
                                    HorizontalAlignment="Left"
                                    BorderBrush="Black"
                                    BorderThickness="1">
                                <Image x:Name="AvatarImage"
                                       AllowDrop="False"
                                       ScrollViewer.VerticalScrollBarVisibility="Disabled" />
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                    <DockPanel Grid.Column="2"
                               HorizontalAlignment="Right"
                               VerticalAlignment="Bottom">
                        <DockPanel.Resources>
                            <Style TargetType="{x:Type Button}">
                                <Setter Property="Margin" Value="2,0,2,0" />
                            </Style>
                        </DockPanel.Resources>
                        <Button Width="75"
                                Click="SettingsSaveButtonClick"
                                Content="Save" />
                        <Button Width="75"
                                Click="SettingsCancelButtonClick"
                                Content="Cancel" />
                    </DockPanel>
                </Grid>
            </TabItem>
        </TabControl>
        <Button x:Name="PreviousButton"
                Grid.Column="0"
                Width="32"
                Height="32"
                Margin="10,0,0,61"
                HorizontalAlignment="Left"
                VerticalAlignment="Bottom"
                Command="MediaCommands.PreviousTrack"
                ToolTip="Previous Title">
            <Image Source="Images/media-skip-backward.png" />
        </Button>
        <Button x:Name="StopButton"
                Grid.Column="0"
                Width="32"
                Height="32"
                Margin="47,0,0,61"
                HorizontalAlignment="Left"
                VerticalAlignment="Bottom"
                Command="MediaCommands.Stop"
                ToolTip="Stop">
            <Image Source="Images/media-playback-stop.png" />
        </Button>
        <Button x:Name="PlayButton"
                Grid.Column="0"
                Width="45"
                Height="32"
                Margin="84,0,0,61"
                HorizontalAlignment="Left"
                VerticalAlignment="Bottom"
                Command="MediaCommands.Play"
                ToolTip="Play">
            <Image Source="Images/media-playback-start.png" />
        </Button>
        <Button x:Name="PauseButton"
                Grid.Column="0"
                Width="32"
                Height="32"
                Margin="134,0,0,61"
                HorizontalAlignment="Left"
                VerticalAlignment="Bottom"
                Command="MediaCommands.Pause"
                ToolTip="Pause">
            <Image Source="Images/media-playback-pause.png" />
        </Button>
        <Button x:Name="NextButton"
                Grid.Column="0"
                Width="32"
                Height="32"
                Margin="171,0,0,61"
                HorizontalAlignment="Left"
                VerticalAlignment="Bottom"
                Command="MediaCommands.NextTrack"
                ToolTip="Next Title">
            <Image Source="Images/media-skip-forward.png" />
        </Button>
        <Slider x:Name="ProgressSlider"
                Grid.Column="0"
                Grid.ColumnSpan="3"
                Height="22"
                Margin="10,0,10,34"
                VerticalAlignment="Bottom"
                IsMoveToPointEnabled="True"
                PreviewMouseLeftButtonDown="ProgressSliderMouseLeftButtonDown"
                PreviewMouseLeftButtonUp="ProgressSliderMouseLeftButtonUp" />
        <MediaElement x:Name="MediaPlayer"
                      Grid.Column="0"
                      Width="1"
                      Height="1"
                      Margin="0,0,0,0"
                      HorizontalAlignment="Left"
                      VerticalAlignment="Top"
                      LoadedBehavior="Manual"
                      MediaOpened="MediaPlayerMediaOpened"
                      UnloadedBehavior="Manual"
                      Visibility="Hidden" />
        <Image x:Name="MusicCoverArt"
               Grid.Column="1"
               Width="40"
               Height="40"
               Margin="10,0,0,61"
               HorizontalAlignment="Left"
               VerticalAlignment="Bottom"
               AllowDrop="False"
               MouseLeftButtonUp="MusicCoverArtMouseLeftButtonUp"
               RenderTransformOrigin="0.689,0.343"
               ScrollViewer.VerticalScrollBarVisibility="Disabled" />
        <StackPanel Grid.Column="1"
                    Width="175"
                    Height="40"
                    Margin="55,0,0,61"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Bottom"
                    MouseLeftButtonUp="TrackInfoStackPanelMouseLeftButtonUp">
            <TextBlock x:Name="MusicArtistLabel"
                       Width="175"
                       Height="13"
                       Margin="0,0,0,0"
                       FontSize="10"
                       FontWeight="Normal"
                       TextTrimming="WordEllipsis" />
            <TextBlock x:Name="MusicTitleLabel"
                       Width="175"
                       Height="13"
                       Margin="0,0,0,0"
                       FontSize="10"
                       FontWeight="Medium"
                       TextTrimming="WordEllipsis" />
            <TextBlock x:Name="MusicAlbumLabel"
                       Width="175"
                       Height="13"
                       Margin="0,0,0,0"
                       FontSize="10"
                       FontWeight="Bold"
                       TextTrimming="WordEllipsis" />
        </StackPanel>
        <Button Grid.Column="1"
                Grid.ColumnSpan="2"
                Width="32"
                Height="32"
                Margin="0,0,340,61"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Click="NewPlaylistButtonClick"
                ToolTip="New Playlist">
            <Image Source="Images/document-new.png" />
        </Button>
        <DockPanel Grid.Column="1"
                   Grid.ColumnSpan="2"
                   Margin="0,4,10,0"
                   HorizontalAlignment="Right"
                   VerticalAlignment="Top">
            <Image Width="20"
                   Height="20"
                   Margin="4,0,4,0"
                   Source="Images\filter.png" />
            <TextBox Width="200"
                     Height="Auto"
                     PreviewKeyDown="ArtistFilterTextBoxKeyDown"
                     TextChanged="ArtistFilterTextBoxTextChanged"
                     ToolTip="Artist Filter" />
            <Separator Margin="4,0,4,0" />
            <Image Width="20"
                   Height="20"
                   Margin="4,0,4,0"
                   Source="Images\stock_search.png" />
            <TextBox x:Name="GlobalSearchTextBox"
                     Width="200"
                     Height="Auto"
                     PreviewKeyDown="GlobalSearchTextBoxKeyDown"
                     ToolTip="Global Search" />
        </DockPanel>
        <Button x:Name="RepeatButton"
                Grid.Column="2"
                Width="32"
                Height="32"
                Margin="0,0,266,61"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Click="RepeatButtonClick"
                ToolTip="Repeat: Disabled">
            <Image x:Name="RepeatButtonIcon">
                <Image.Style>
                    <Style TargetType="Image">
                        <Setter Property="Source" Value="/Images/media-playlist-repeat-disabled.png" />
                        <Style.Triggers>
                            <Trigger Property="Name" Value="RepeatEnabled">
                                <Setter Property="Source" Value="/Images/media-playlist-repeat-enabled.png" />
                            </Trigger>
                            <Trigger Property="Name" Value="RepeatDisabled">
                                <Setter Property="Source" Value="/Images/media-playlist-repeat-disabled.png" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Image.Style>
            </Image>
        </Button>
        <Button Grid.Column="2"
                Width="32"
                Height="32"
                Margin="0,0,231,61"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Click="ShuffleButtonClick"
                ToolTip="Shuffle Playlist">
            <Image Source="Images/media-playlist-shuffle.png" />
        </Button>
        <Button x:Name="MuteButton"
                Grid.Column="2"
                Width="32"
                Height="32"
                Margin="0,0,196,61"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Click="MuteButtonClick"
                ToolTip="Mute Volume">
            <Image x:Name="MuteButtonIcon">
                <Image.Style>
                    <Style TargetType="Image">
                        <Setter Property="Source" Value="/Images/audio-volume-zero-panel.png" />
                        <Style.Triggers>
                            <Trigger Property="Name" Value="VolumeMuted">
                                <Setter Property="Source" Value="/Images/audio-volume-muted-panel.png" />
                            </Trigger>
                            <Trigger Property="Name" Value="VolumeZero">
                                <Setter Property="Source" Value="/Images/audio-volume-zero-panel.png" />
                            </Trigger>
                            <Trigger Property="Name" Value="VolumeLow">
                                <Setter Property="Source" Value="/Images/audio-volume-low-panel.png" />
                            </Trigger>
                            <Trigger Property="Name" Value="VolumeMedium">
                                <Setter Property="Source" Value="/Images/audio-volume-medium-panel.png" />
                            </Trigger>
                            <Trigger Property="Name" Value="VolumeHigh">
                                <Setter Property="Source" Value="/Images/audio-volume-high-panel.png" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Image.Style>
            </Image>
        </Button>
        <Slider x:Name="VolumeSlider"
                Grid.Column="2"
                Width="181"
                Height="32"
                MinHeight="32"
                MaxHeight="32"
                Margin="0,0,10,61"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                VerticalContentAlignment="Center"
                IsMoveToPointEnabled="True"
                UseLayoutRounding="True"
                ValueChanged="VolumeSliderValueChanged" />
        <Button x:Name="SavePlaylistButton"
                Grid.Column="2"
                Width="32"
                Height="32"
                Margin="0,0,303,61"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Click="SavePlaylistButtonClick"
                ToolTip="Save Playlist">
            <Image Source="Images/document-save.png" />
        </Button>
    </Grid>
</Window>
